"use client";
import Link from "next/link";
import Image from "next/image";
import React, { useState } from "react";
import { SignedIn, UserButton, SignedOut, SignInButton, useUser } from "@clerk/nextjs";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faUserCheck, faUserShield } from "@fortawesome/free-solid-svg-icons";


export default function Navbar({ className }) {
  const [showSpacesDropdown, setShowSpacesDropdown] = useState(false);
  const [showMemAudDropdown, setShowMemAudDropdown] = useState(false);
  const [showRobleDropdown, setShowRobleDropdown] = useState(false);

  const user = useUser();

  return (
    <nav className="flex flex-wrap items-center justify-between p-4 text-base text-white shadow dark:bg-cardinal backdrop-blur-sm">
      <div className="flex items-center">
        <ul className="flex items-center ml-6">

          <li className="pr-4">
            <a className="w-[139px] h-[63px]">
              <Link href="/">
                <svg width="139" height="63" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#prefix__clip0_225_2)" className="fill-black dark:fill-white"><path d="M76.448 26.192c-.683 0-1.37-.117-2.064-.352a5.463 5.463 0 01-1.872-1.152l1.44-1.792c.373.299.79.528 1.248.688.459.16.896.24 1.312.24.416 0 .715-.064.896-.192a.616.616 0 00.288-.544.488.488 0 00-.176-.4 1.424 1.424 0 00-.48-.288 12.281 12.281 0 00-.752-.32l-1.296-.528a4.489 4.489 0 01-1.04-.624 3.056 3.056 0 01-.768-.96c-.192-.384-.288-.827-.288-1.328 0-.597.165-1.136.496-1.616.33-.49.784-.88 1.36-1.168.587-.299 1.259-.448 2.016-.448a5.2 5.2 0 011.84.336 4.559 4.559 0 011.616.976l-1.44 1.792a4.246 4.246 0 00-1.04-.544 2.78 2.78 0 00-.976-.192c-.33 0-.597.059-.8.176a.578.578 0 00-.288.528c0 .16.059.299.176.416.128.107.31.208.544.304.235.085.507.192.816.32l1.264.496c.437.17.805.39 1.104.656.299.256.528.565.688.928.16.363.24.784.24 1.264 0 .587-.16 1.136-.48 1.648-.31.501-.768.907-1.376 1.216-.608.31-1.344.464-2.208.464zM82.183 26V15.6h3.808c.758 0 1.456.107 2.096.32.64.213 1.152.57 1.536 1.072.395.501.592 1.19.592 2.064 0 .843-.197 1.536-.592 2.08a3.405 3.405 0 01-1.536 1.184 5.341 5.341 0 01-2.032.384h-1.12V26h-2.752zm2.752-5.472h.992c.544 0 .944-.128 1.2-.384.267-.267.4-.63.4-1.088 0-.47-.144-.8-.432-.992-.288-.192-.698-.288-1.232-.288h-.928v2.752zM89.965 26l3.168-10.4h3.328L99.629 26h-2.912l-1.184-5.056a47.84 47.84 0 01-.384-1.632 67.502 67.502 0 00-.384-1.664h-.064c-.107.523-.224 1.077-.352 1.664a47.84 47.84 0 01-.384 1.632L92.781 26h-2.816zm2.272-2.208v-2.128h5.088v2.128h-5.088zm12.804 2.4a5.503 5.503 0 01-2.496-.576c-.758-.395-1.371-.987-1.84-1.776-.459-.79-.688-1.776-.688-2.96 0-.875.133-1.648.4-2.32a5.132 5.132 0 011.12-1.728 4.809 4.809 0 011.616-1.056 5 5 0 011.888-.368c.693 0 1.312.133 1.856.4a4.633 4.633 0 011.376.976l-1.44 1.664a2.684 2.684 0 00-.8-.496 2.288 2.288 0 00-.928-.176c-.395 0-.768.123-1.12.368-.342.245-.619.592-.832 1.04-.214.448-.32.981-.32 1.6 0 .65.101 1.205.304 1.664.202.448.485.79.848 1.024.362.235.778.352 1.248.352.373 0 .709-.075 1.008-.224.298-.16.549-.341.752-.544l1.376 1.632c-.459.512-.971.89-1.536 1.136a4.382 4.382 0 01-1.792.368zM109.84 26V15.6h6.72v2.304h-3.968v1.632h3.392v2.304h-3.392v1.856h4.128V26h-6.88zM73.152 46V35.6h3.936a6.7 6.7 0 012.064.304c.63.192 1.136.533 1.52 1.024.384.49.576 1.168.576 2.032 0 .832-.192 1.51-.576 2.032-.384.523-.89.907-1.52 1.152a5.636 5.636 0 01-2.064.368h-1.184V46h-2.752zm2.752-5.664h.992c.544 0 .955-.117 1.232-.352.288-.235.432-.576.432-1.024 0-.448-.144-.757-.432-.928-.277-.17-.688-.256-1.232-.256h-.992v2.56zM78.752 46l-2.16-4.208 1.856-1.824L81.824 46h-3.072zm4.478 0V35.6h6.72v2.304h-3.968v1.632h3.392v2.304h-3.392v1.856h4.128V46h-6.88zm13.275.192c-.96 0-1.803-.213-2.528-.64-.726-.437-1.29-1.061-1.696-1.872-.406-.81-.608-1.787-.608-2.928s.202-2.107.608-2.896c.405-.8.97-1.408 1.696-1.824.725-.416 1.568-.624 2.528-.624s1.802.208 2.528.624c.725.416 1.29 1.024 1.696 1.824.405.79.608 1.755.608 2.896s-.203 2.117-.608 2.928c-.406.81-.97 1.435-1.696 1.872-.726.427-1.568.64-2.528.64zm0-2.24c.416 0 .773-.123 1.072-.368.31-.256.544-.619.704-1.088.16-.48.24-1.061.24-1.744 0-.63-.08-1.163-.24-1.6-.16-.448-.395-.79-.704-1.024a1.682 1.682 0 00-1.072-.352 1.75 1.75 0 00-1.088.352c-.299.235-.528.576-.688 1.024-.16.437-.24.97-.24 1.6 0 .683.08 1.264.24 1.744.16.47.39.832.688 1.088a1.7 1.7 0 001.088.368zm3.52 5.056c-1.195 0-2.203-.293-3.024-.88a5.224 5.224 0 01-1.808-2.224l2.784-.288c.128.31.32.55.576.72.266.181.554.31.864.384a4.08 4.08 0 001.568.064c.202-.032.384-.07.544-.112l.48 1.952a3.31 3.31 0 01-.816.272 5.5 5.5 0 01-1.168.112zm7.43-2.816c-.725 0-1.36-.101-1.904-.304a3.3 3.3 0 01-1.36-.928c-.352-.416-.619-.939-.8-1.568-.171-.64-.256-1.392-.256-2.256V35.6h2.752v5.856c0 .576.053 1.04.16 1.392.117.341.288.592.512.752.235.15.533.224.896.224s.661-.075.896-.224c.235-.16.411-.41.528-.752.117-.352.176-.816.176-1.392V35.6h2.656v5.536c0 .864-.085 1.616-.256 2.256-.171.63-.432 1.152-.784 1.568a3.059 3.059 0 01-1.328.928c-.533.203-1.163.304-1.888.304zm6.494-.192V35.6h6.72v2.304h-3.968v1.632h3.392v2.304h-3.392v1.856h4.128V46h-6.88zm12.187.192a6.404 6.404 0 01-2.064-.352 5.457 5.457 0 01-1.872-1.152l1.44-1.792c.373.299.789.528 1.248.688.458.16.896.24 1.312.24.416 0 .714-.064.896-.192a.616.616 0 00.288-.544.49.49 0 00-.176-.4 1.43 1.43 0 00-.48-.288 12.556 12.556 0 00-.752-.32l-1.296-.528a4.474 4.474 0 01-1.04-.624 3.056 3.056 0 01-.768-.96c-.192-.384-.288-.827-.288-1.328 0-.597.165-1.136.496-1.616.33-.49.784-.88 1.36-1.168.586-.299 1.258-.448 2.016-.448.629 0 1.242.112 1.84.336a4.552 4.552 0 011.615.976l-1.439 1.792a4.251 4.251 0 00-1.04-.544 2.784 2.784 0 00-.976-.192c-.331 0-.598.059-.8.176a.578.578 0 00-.288.528c0 .16.058.299.176.416.128.107.309.208.544.304.234.085.506.192.816.32l1.264.496c.437.17.805.39 1.104.656.298.256.528.565.688.928.16.363.24.784.24 1.264 0 .587-.16 1.136-.48 1.648-.31.501-.768.907-1.376 1.216-.608.31-1.344.464-2.208.464zm7.406-.192v-8.096h-2.752V35.6h8.256v2.304h-2.752V46h-2.752z" /><path fill-rule="evenodd" clip-rule="evenodd" d="M62.5 31.25L31.25 0 0 31.25l21.773 21.773 7.066-7.066 1.018 1.018-2.98 2.98 8.459 8.46-1.148 1.147-8.459-8.46-2.938 2.939L31.25 62.5l26.495-26.495c-.203.113-.408.21-.614.29-.712.274-1.407.358-2.082.25-.673-.111-1.287-.407-1.842-.889l1.185-1.184c.388.327.805.502 1.25.527.443.019.884-.077 1.322-.287a4.607 4.607 0 001.222-.888c.438-.438.76-.902.967-1.393.204-.494.28-.97.227-1.43a2.016 2.016 0 00-.602-1.212c-.314-.315-.658-.483-1.032-.505a2.737 2.737 0 00-1.175.213c-.41.164-.828.366-1.254.606l-1.5.833c-.952.528-1.843.81-2.67.847-.826.037-1.559-.264-2.197-.902-.53-.53-.85-1.137-.958-1.819-.108-.688-.028-1.385.24-2.091.269-.713.705-1.372 1.31-1.976.61-.611 1.263-1.045 1.957-1.3.691-.26 1.364-.34 2.018-.241a3.13 3.13 0 011.726.837l-1.11 1.11a2.054 2.054 0 00-1.768-.416c-.654.136-1.268.49-1.842 1.065-.42.42-.719.854-.898 1.305-.175.447-.233.877-.17 1.29.064.411.247.767.55 1.07.253.253.53.41.833.472.302.055.609.047.92-.024.31-.073.607-.177.894-.31.283-.135.536-.268.759-.398l1.221-.703c.312-.182.676-.367 1.092-.555a5.38 5.38 0 011.342-.407 3.367 3.367 0 011.444.055c.488.123.953.407 1.398.852.512.512.84 1.109.985 1.79.148.68.088 1.396-.18 2.152a4.715 4.715 0 01-.332.73L62.5 31.25zM39.368 54.382l-1.203 1.203-.637-1.378-.17 1.706-1.324-1.324.14-1.485a4.029 4.029 0 01-1.78-.398 5.808 5.808 0 01-1.64-1.137c-.628-.627-1.053-1.283-1.277-1.966-.224-.684-.258-1.349-.103-1.995.156-.646.491-1.227 1.007-1.742.301-.302.624-.529.97-.682l-1.183-2.556 1.185-1.185 3.857 1.785c.024-.087.05-.173.078-.256.158-.482.424-.91.797-1.282.428-.429.899-.71 1.412-.843a2.8 2.8 0 011.565.046c.532.165 1.03.48 1.496.946.479.479.797.983.956 1.515a2.86 2.86 0 01.065 1.528 2.587 2.587 0 01-.516 1.055l3.247 1.503-1.203 1.203-3.563-1.696a2.728 2.728 0 01-.144.035l-3.502 3.502-.066.67.11.232c.113-.04.226-.085.338-.134.575-.245 1.119-.624 1.631-1.137l1.063 1.063c-.634.634-1.224 1.078-1.77 1.333a6.608 6.608 0 01-.608.249l.773 1.622zm-3.059-2.738a4.114 4.114 0 01-1.342-.256 3.623 3.623 0 01-1.281-.825c-.38-.38-.631-.79-.755-1.23a2.466 2.466 0 01-.033-1.282c.103-.413.303-.769.601-1.067.096-.096.278-.196.547-.3l2.269 4.903-.005.057zm1.815-3.422l1.237-1.237-1.098-.16-.14 1.397zm-1.344-1.614v.003l-.182 1.95-1.002-2.105c.179.011.368.032.569.062l.615.09zm.171-1.847l-.032.345a14.432 14.432 0 00-1.663-.205 5.32 5.32 0 00-.405-.01l-.628-1.32.074-.073 2.654 1.263zm1.681-.875l2.898 1.342c.076-.06.152-.127.227-.201.242-.243.37-.584.382-1.026.015-.438-.15-.829-.494-1.174a1.602 1.602 0 00-.83-.456 1.875 1.875 0 00-.899.032 1.674 1.674 0 00-.732.424c-.223.224-.39.511-.498.862-.019.065-.037.13-.054.197zm9.154 2.078l-9.477-9.477 3.202-3.202c.743-.744 1.485-1.217 2.226-1.42.74-.21 1.451-.203 2.133.022.682.225 1.302.617 1.86 1.176.559.558.952 1.18 1.18 1.864.232.682.247 1.395.047 2.138-.204.74-.675 1.48-1.412 2.217l-2.073 2.073 3.462 3.462-1.148 1.147zm-7.312-9.607l3.98 3.98 2.036-2.036c.51-.51.83-1.006.963-1.49a2.224 2.224 0 00-.042-1.384 3.363 3.363 0 00-.81-1.235 3.32 3.32 0 00-1.23-.805 2.147 2.147 0 00-1.38-.028c-.484.139-.984.466-1.499.98l-2.018 2.018z" /></g></svg>
              </Link>
            </a>
          </li>
          <li>

            <a className="px-3 text-black transition-all duration-300 ease-in-out dark:text-white group" href="#">
              <Link href="/" className="bg-left-bottom bg-gradient-to-r from-black to-black dark:from-white dark:to-white bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out ">
                HOME
              </Link>
            </a>
          </li>
          <li>
            <a className="px-3 text-black transition-all duration-300 ease-in-out dark:text-white group" href="#">
              <Link href="/request" className="bg-left-bottom bg-gradient-to-r from-black to-black dark:from-white dark:to-white bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out ">
                REQUEST
              </Link>
            </a>
          </li>
          <li>
            <div
              onMouseEnter={() => setShowSpacesDropdown(true)}
              onMouseLeave={() => setShowSpacesDropdown(false)}
            >

              <a className="px-3 text-black transition-all duration-300 ease-in-out dark:text-white group" href="#">
                <Link href="/spaces" className="bg-left-bottom bg-gradient-to-r from-black to-black dark:from-white dark:to-white bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out ">
                  SPACES
                </Link>
              </a>

              <div className="absolute flex">
                {showSpacesDropdown && (
                  <div className="z-10 mt-4 border border-red-900 shadow">
                    <div
                      className="w-full p-4 bg-red-800 outline-1 outline-white hover:outline"
                      onMouseEnter={() => setShowMemAudDropdown(true)}
                      onMouseLeave={() => setShowMemAudDropdown(false)}
                    >
                      <Link href="/spaces/memaud" >Memorial Hall</Link>
                    </div>
                    <div
                      className="w-full p-4 bg-red-800 outline-1 outline-white hover:outline"
                      onMouseEnter={() => setShowRobleDropdown(true)}
                      onMouseLeave={() => setShowRobleDropdown(false)}
                    >
                      <Link href="/spaces/roble" >Roble Gym</Link>
                    </div>
                    <div className="w-full p-4 bg-red-800 outline-1 outline-white hover:outline">
                      <Link href="/spaces/nitery" > Nitery Theater </Link>
                    </div>
                  </div>
                )}
                {/* {showMemAudDropdown && (
                  <div
                    onMouseEnter={() => setShowMemAudDropdown(true)}
                    onMouseLeave={() => setShowMemAudDropdown(false)}
                    className="p-4 -ml-2 bg-red-800"
                  >
                    MemAud spaces
                  </div>
                )}
                {showRobleDropdown && (
                  <div
                    onMouseEnter={() => setShowRobleDropdown(true)}
                    onMouseLeave={() => setShowRobleDropdown(false)}
                    className="p-4 -ml-2 bg-red-800"
                  >
                    Roble spaces
                  </div>
                )} */}
              </div>
            </div>
          </li>
        </ul>
      </div>
      <div className="flex flex-row items-center pr-4">
        <SignedIn>
          { /* Approval page icon Font awesome */}
          {(user.user && user.user.publicMetadata.approver) ? <Link href="/approve" className="px-3 py-2 mx-2 text-black dark:hover:bg-red-900 hover:bg-cardinal dark:text-white hover:text-white"><div><a className="pr-1">APPROVALS</a> <FontAwesomeIcon icon={faUserShield} /></div></Link> : null}
        </SignedIn>
        <div>
          <SignedIn>
            {/* Mount the UserButton component */}
            <UserButton afterSignOutUrl="/" />
          </SignedIn>
          <SignedOut>
            {/* Signed out users get sign in button */}
            <SignInButton>
              <a className="px-3 text-black transition-all duration-300 ease-in-out dark:text-white group" href="#">
                <Link href="#" className="bg-left-bottom bg-gradient-to-r from-black to-black dark:from-white dark:to-white bg-[length:0%_2px] bg-no-repeat group-hover:bg-[length:100%_2px] transition-all duration-500 ease-out ">
                  SIGN IN
                </Link>
              </a>
            </SignInButton>
          </SignedOut>
        </div>
      </div>
    </nav>
  );
}
